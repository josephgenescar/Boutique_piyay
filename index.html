---
layout: default
title: Accueil
---

<section id="hero">
  <h1>ğŸ›ï¸ Bienvenue sur notre Boutique Universelle</h1>
  <p>âœ¨ VÃªtements â€¢ Ã‰pices â€¢ Manba et plus âœ¨</p>
</section>

<section id="products">
  <h2>ğŸª Nos Produits</h2>
  <div class="product-grid">
    {% for product in site.products %}
      <div class="product-card">
        <img src="{{ product.image }}" alt="{{ product.title }}">
        <h3>{{ product.title }}</h3>
        <p>{{ product.description }}</p>
        <p class="price">ğŸ’° {{ product.price }} HTG</p>
        <div class="qty-section">
          <input type="number" min="1" value="1" id="qty-{{ product.title | slugify }}">
        </div>
        <button onclick="orderProduct('{{ product.title }}', '{{ product.price }}', '{{ product.id }}')">ğŸ›’ Ajouter</button>
      </div>
    {% endfor %}
  </div>
</section>

<!-- Cart Button -->
<div class="cart-button-container">
  <button class="cart-btn" onclick="openOrderModal()" title="Voir le panier">
    ğŸ›’
    <span id="cart-badge">0</span>
  </button>
</div>

<!-- Order Modal -->
<div id="order-modal">
  <div class="modal-content">
    <div class="modal-header">
      <h2>ğŸ“‹ Passer une Commande</h2>
      <button class="modal-close" onclick="closeOrderModal()">âœ•</button>
    </div>
    
    <div class="modal-body">
      <!-- Order Summary -->
      <div id="order-summary"></div>
      
      <!-- Customer Information -->
      <div class="form-group">
        <label for="customer-name">ğŸ‘¤ Votre Nom Complet</label>
        <input type="text" id="customer-name" placeholder="Ex: Jean DuvirÃ©" required>
      </div>
      
      <div class="form-group">
        <label for="customer-phone">ğŸ“± NumÃ©ro de TÃ©lÃ©phone</label>
        <input type="tel" id="customer-phone" placeholder="Ex: +509 48868964" required>
      </div>
      
      <!-- Payment Methods -->
      <div class="form-group">
        <label>ğŸ’³ MÃ©thode de Paiement</label>
        <select id="payment-method" required>
          <option value="">-- SÃ©lectionner une option --</option>
          <option value="Moncash">ğŸ’¸ Moncash</option>
          <option value="Natcash">ğŸ’³ Natcash</option>
          <option value="Virement Bancaire">ğŸ¦ Virement Bancaire</option>
          <option value="EspÃ¨ces Ã  la Livraison">ğŸ’µ EspÃ¨ces Ã  la Livraison</option>
        </select>
      </div>
      
      <!-- Payment Information -->
      <div style="background: #c95328; border-left: 4px solid #ffc107; padding: 15px; border-radius: 8px; margin: 20px 0; font-size: 0.95em;">
        <p style="margin: 0;"><strong>â„¹ï¸ Information Paiement:</strong></p>
        <p style="margin: 5px 0;">ğŸ“² <strong>Moncash:</strong> +509 48868964</p>
        <p style="margin: 5px 0;">ğŸ’³ <strong>Natcash:</strong> +509 40683108</p>
        <p style="margin: 0;">Nous vous confirmerons les dÃ©tails de paiement aprÃ¨s rÃ©ception de votre commande.</p>
      </div>
      
      <!-- Buttons -->
      <div class="modal-buttons">
        <button class="btn-cancel" onclick="closeOrderModal()">âŒ Annuler</button>
        <button class="btn-submit" onclick="submitOrder()">âœ… Confirmer la Commande</button>
      </div>
      <script>
let cart = [];

function orderProduct(title, price, id) {
    const qtyInput = document.getElementById(`qty-${title.toLowerCase().replace(/\s+/g, '-')}`);
    const quantity = parseInt(qtyInput.value);
    
    const existingItem = cart.find(item => item.title === title);
    if (existingItem) {
        existingItem.quantity += quantity;
    } else {
        cart.push({ title, price, quantity });
    }
    
    updateCartBadge();
    alert(`âœ… ${quantity} ${title} ajoute nan panyen an!`);
}

function updateCartBadge() {
    const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
    document.getElementById('cart-badge').innerText = totalItems;
}

function openOrderModal() {
    if (cart.length === 0) {
        alert("Panyen ou vid! Ajoute yon pwodwi anvan.");
        return;
    }
    document.getElementById('order-modal').style.display = 'flex';
    renderOrderSummary();
}

function closeOrderModal() {
    document.getElementById('order-modal').style.display = 'none';
}

function renderOrderSummary() {
    let summaryHtml = "<ul>";
    let total = 0;
    cart.forEach(item => {
        const subtotal = item.price * item.quantity;
        summaryHtml += `<li>${item.quantity}x ${item.title} - ${subtotal} HTG</li>`;
        total += subtotal;
    });
    summaryHtml += `</ul><p><strong>Total: ${total} HTG</strong></p>`;
    document.getElementById('order-summary').innerHTML = summaryHtml;
}

function submitOrder() {
    const name = document.getElementById('customer-name').value;
    const phone = document.getElementById('customer-phone').value;
    const payment = document.getElementById('payment-method').value;

    if (!name || !phone || !payment) {
        alert("Tanpri ranpli tout enfÃ²masyon yo!");
        return;
    }

    // 1. MESAJ OTOMATIK SOU EKRAN AN
    alert(`MÃ¨si ${name}! ğŸ‰ \n\nKÃ²mand ou a preske fini. Kounye a, nou pral dirije w sou WhatsApp pou voye detay yo ban nou epi konfime peman an.`);

    // 2. PREPARASYON MESAJ WHATSAPP LA
    let message = `*NOUVO KÃ’MAND - BOUTIQUE PIYAY*\n\n`;
    message += `*Non:* ${name}\n`;
    message += `*TelefÃ²n:* ${phone}\n`;
    message += `*Peman:* ${payment}\n\n`;
    message += `*Pwodwi:*\n`;
    
    let total = 0;
    cart.forEach(item => {
        message += `- ${item.quantity}x ${item.title} (${item.price * item.quantity} HTG)\n`;
        total += (item.price * item.quantity);
    });
    
    message += `\n*TOTAL:* ${total} HTG`;

    const encodedMessage = encodeURIComponent(message);
    const whatsappUrl = `https://wa.me/50948868964?text=${encodedMessage}`;

    // 3. OUVÃˆ WHATSAPP
    window.open(whatsappUrl, '_blank');
    
    // Reyalize panyen an apre kÃ²mand lan
    cart = [];
    updateCartBadge();
    closeOrderModal();
}
</script>

<style>
/* Ti style pou asire modal la parÃ¨t byen */
#order-modal {
    display: none;
    position: fixed;
    top: 0; left: 0; width: 100%; height: 100%;
    background: rgba(0,0,0,0.8);
    justify-content: center; align-items: center;
    z-index: 1000;
}
.modal-content {
    background: white; padding: 20px; border-radius: 10px;
    max-width: 500px; width: 90%; color: #333;
}
.form-group { margin-bottom: 15px; }
.form-group label { display: block; margin-bottom: 5px; font-weight: bold; }
.form-group input, .form-group select { width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 5px; }
.btn-submit { background: #25d366; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; width: 100%; font-weight: bold; }
</style>
    </div>
  </div>
</div>
