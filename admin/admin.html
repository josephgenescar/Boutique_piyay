<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Panel - Boutique Piyay</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Poppins', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
      min-height: 100vh;
      padding: 20px;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
    }

    header {
      background: linear-gradient(135deg, #ff4747 0%, #ff8c42 100%);
      color: white;
      padding: 30px;
      border-radius: 16px;
      margin-bottom: 30px;
      box-shadow: 0 8px 25px rgba(255, 71, 71, 0.2);
    }

    header h1 {
      font-size: 32px;
      margin-bottom: 8px;
    }

    header p {
      font-size: 14px;
      opacity: 0.9;
    }

    .nav-tabs {
      display: flex;
      gap: 15px;
      margin-top: 20px;
      flex-wrap: wrap;
    }

    .nav-tabs a,
    .nav-tabs button {
      display: inline-block;
      padding: 10px 20px;
      background: rgba(255, 255, 255, 0.2);
      color: white;
      text-decoration: none;
      border-radius: 8px;
      border: 1px solid rgba(255, 255, 255, 0.3);
      transition: all 0.3s;
      font-weight: 600;
      font-size: 14px;
      cursor: pointer;
      font-family: inherit;
    }

    .nav-tabs a:hover,
    .nav-tabs button:hover {
      background: rgba(255, 255, 255, 0.3);
      transform: translateY(-2px);
    }

    .nav-tabs button.logout {
      background: rgba(220, 38, 38, 0.2);
      border-color: rgba(220, 38, 38, 0.5);
      color: #fde2e2;
    }

    .nav-tabs button.logout:hover {
      background: rgba(220, 38, 38, 0.4);
    }

    .tab-content {
      background: white;
      border-radius: 16px;
      padding: 40px;
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
      display: none;
    }

    .tab-content.active {
      display: block;
      animation: fadeIn 0.3s ease;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .dashboard-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 25px;
      margin-bottom: 40px;
    }

    .dashboard-card {
      background: white;
      border-radius: 12px;
      padding: 25px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
      border: 1px solid rgba(255, 71, 71, 0.1);
      transition: all 0.3s;
      cursor: pointer;
      text-decoration: none;
      color: inherit;
      display: block;
    }

    .dashboard-card:hover {
      transform: translateY(-8px);
      box-shadow: 0 12px 30px rgba(255, 71, 71, 0.15);
      border-color: rgba(255, 71, 71, 0.3);
    }

    .card-icon {
      font-size: 40px;
      margin-bottom: 12px;
    }

    .card-title {
      font-size: 18px;
      font-weight: 700;
      color: #111827;
      margin-bottom: 8px;
    }

    .card-description {
      font-size: 13px;
      color: #666;
      line-height: 1.4;
    }

    .stats-row {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }

    .stat-box {
      background: linear-gradient(135deg, rgba(255, 71, 71, 0.1) 0%, rgba(255, 140, 66, 0.1) 100%);
      padding: 20px;
      border-radius: 12px;
      border: 1px solid rgba(255, 71, 71, 0.2);
    }

    .stat-label {
      font-size: 12px;
      color: #666;
      font-weight: 600;
      text-transform: uppercase;
      margin-bottom: 8px;
    }

    .stat-value {
      font-size: 28px;
      font-weight: 800;
      color: #ff4747;
    }

    .section-title {
      font-size: 22px;
      font-weight: 700;
      margin-bottom: 20px;
      color: #111827;
      padding-bottom: 15px;
      border-bottom: 3px solid rgba(255, 71, 71, 0.2);
    }

    .info-box {
      background: #f0f9ff;
      padding: 20px;
      border-radius: 12px;
      border-left: 4px solid #0ea5e9;
      margin-bottom: 20px;
    }

    .info-box p {
      font-size: 14px;
      line-height: 1.6;
      color: #0c4a6e;
    }

    .info-box code {
      background: white;
      padding: 2px 6px;
      border-radius: 4px;
      font-family: 'Monaco', monospace;
      font-size: 12px;
      color: #e11d48;
    }

    .quick-actions {
      display: flex;
      gap: 15px;
      flex-wrap: wrap;
      margin-bottom: 30px;
    }

    .quick-btn {
      padding: 10px 20px;
      background: linear-gradient(135deg, rgba(255, 71, 71, 0.1), rgba(255, 140, 66, 0.1));
      border: 2px solid rgba(255, 71, 71, 0.3);
      border-radius: 8px;
      color: #ff4747;
      text-decoration: none;
      font-weight: 700;
      font-size: 13px;
      cursor: pointer;
      transition: all 0.3s;
      font-family: inherit;
    }

    .quick-btn:hover {
      background: linear-gradient(135deg, #ff4747, #ff8c42);
      color: white;
      border-color: transparent;
      transform: translateY(-2px);
    }

    footer {
      text-align: center;
      padding: 30px 20px;
      color: #666;
      font-size: 13px;
      margin-top: 40px;
    }

    @media (max-width: 768px) {
      header { padding: 20px; }
      header h1 { font-size: 24px; }
      .tab-content { padding: 20px; }
      .dashboard-grid { grid-template-columns: 1fr; }
      .nav-tabs { flex-direction: column; }
      .nav-tabs a, .nav-tabs button { width: 100%; text-align: center; }
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>üõçÔ∏è Boutique Piyay Admin</h1>
      <p>Pann√®l Administrasyon - G√®rasyon Boutik</p>
      
      <div class="nav-tabs">
        <a href="/" target="_blank">‚Üê Retounen Site</a>
        <button onclick="switchTab('dashboard')" class="tab-button" id="tab-dashboard">üìä Dashboard</button>
        <button onclick="switchTab('config')" class="tab-button" id="tab-config">‚öôÔ∏è Konfigirasyon</button>
        <button onclick="switchTab('products')" class="tab-button" id="tab-products">üì¶ Produits</button>
        <a href="/admin/index.html#/collections/products" target="_blank">üìù CMS</a>
        <button class="logout" onclick="logout()">üö™ Lonje</button>
      </div>
    </header>

    <!-- DASHBOARD TAB -->
    <div class="tab-content active" id="dashboard">
      <h2 class="section-title">üìä Dashboard</h2>
      
      <!-- STATS -->
      <div class="stats-row">
        <div class="stat-box">
          <div class="stat-label">Pwodwi Total</div>
          <div class="stat-value" id="totalProducts">0</div>
        </div>
        <div class="stat-box">
          <div class="stat-label">Kategori</div>
          <div class="stat-value">3</div>
        </div>
        <div class="stat-box">
          <div class="stat-label">Rek√≤mande</div>
          <div class="stat-value" id="featuredCount">0</div>
        </div>
      </div>

      <h3 class="section-title" style="margin-top: 40px;">‚ö° Aksyon Vit</h3>
      <div class="quick-actions">
        <a href="/admin/products.html" class="quick-btn">+ Ajoute Pwodwi</a>
        <a href="/" class="quick-btn">üõí W√® Boutik</a>
        <a href="/admin/account.html" class="quick-btn">üë§ Kompt Kliyan</a>
      </div>

      <h3 class="section-title" style="margin-top: 40px;">üìã Seksyon J√®rans</h3>
      <div class="dashboard-grid">
        <a href="/admin/products.html" class="dashboard-card">
          <div class="card-icon">üì¶</div>
          <div class="card-title">Gestion Produits</div>
          <div class="card-description">Ajoute, modifye ak retire pwodwi av√®k detay</div>
        </a>
        <a href="/admin/account.html" class="dashboard-card">
          <div class="card-icon">üë§</div>
          <div class="card-title">Kompt Kliyan</div>
          <div class="card-description">Afichaj ak j√®rans kompt kliyan y√≤</div>
        </a>
        <a href="/admin/index.html" target="_blank" class="dashboard-card">
          <div class="card-icon">‚úçÔ∏è</div>
          <div class="card-title">Netlify CMS</div>
          <div class="card-description">Sist√®m CMS pou jere k√≤n ak metadonnen</div>
        </a>
      </div>
    </div>

    <!-- CONFIG TAB -->
    <div class="tab-content" id="config">
      <h2 class="section-title">‚öôÔ∏è Konfigirasyon</h2>
      
      <div class="info-box">
        <p>üîí <strong>Admin Session Info:</strong></p>
        <p style="margin-top: 10px;">
          Token: <code id="tokenDisplay">...</code><br>
          Dur√® sesyon: <strong>8 z√®</strong><br>
          St√≤raj: <code>admin_auth_token</code> & <code>admin_auth_time</code>
        </p>
      </div>

      <div class="info-box">
        <p>üìç <strong>Admin Pages:</strong></p>
        <p style="margin-top: 10px;">
          ‚úÖ Login: <code>/admin/login.html</code><br>
          ‚úÖ Auth Required: `/admin/admin.html`, `/admin/products.html`<br>
          ‚úÖ Public: `/admin/account.html`, `/admin/index.html` (CMS)
        </p>
      </div>

      <div class="info-box">
        <p>üîê <strong>Modpas Admin:</strong></p>
        <p style="margin-top: 10px;">
          Password stored in <code>/admin/login.html</code> (line ~114)<br>
          Current: <code>boutique_piyay_2026</code>
        </p>
      </div>

      <button onclick="clearAuth()" class="quick-btn" style="margin-top: 20px;">
        üóëÔ∏è Efase Sesyon St√≤raj
      </button>
    </div>

    <!-- PRODUCTS TAB -->
    <div class="tab-content" id="products">
      <h2 class="section-title">üì¶ Gestion Produits</h2>
      
      <div class="quick-actions">
        <a href="/admin/products.html" class="quick-btn">üìù Ale nan Pwodwi Paj</a>
        <button onclick="reloadProducts()" class="quick-btn">üîÑ Recharje Pwodwi</button>
      </div>

      <div id="productsList" style="margin-top: 30px;">
        <p style="text-align: center; color: #999;">Chajman pwodwi...</p>
      </div>
    </div>
  </div>

  <footer>
    <p>üîí Boutique Piyay Admin Panel v1.0 ‚Ä¢ 2026</p>
    <p>üìû WhatsApp: +509 4886-8964</p>
  </footer>

  <script>
    const AUTH_TOKEN_KEY = 'admin_auth_token';
    const AUTH_TIME_KEY = 'admin_auth_time';
    const SESSION_DURATION = 8 * 60 * 60 * 1000; // 8 hours

    // Check authentication
    function checkAuthentication() {
      const token = localStorage.getItem(AUTH_TOKEN_KEY);
      const authTime = localStorage.getItem(AUTH_TIME_KEY);

      if (!token || !authTime) {
        window.location.href = '/admin/login.html';
        return false;
      }

      const elapsed = Date.now() - parseInt(authTime);
      if (elapsed > SESSION_DURATION) {
        localStorage.removeItem(AUTH_TOKEN_KEY);
        localStorage.removeItem(AUTH_TIME_KEY);
        window.location.href = '/admin/login.html';
        return false;
      }

      return true;
    }

    // Tab switching
    function switchTab(tabName) {
      const tabs = document.querySelectorAll('.tab-content');
      tabs.forEach(t => t.classList.remove('active'));
      document.getElementById(tabName).classList.add('active');

      const buttons = document.querySelectorAll('.tab-button');
      buttons.forEach(b => b.style.background = 'rgba(255, 255, 255, 0.2)');
      document.getElementById('tab-' + tabName).style.background = 'rgba(255, 255, 255, 0.4)';

      if (tabName === 'products') {
        loadProducts();
      }
    }

    // Load products
    function loadProducts() {
      const products = JSON.parse(localStorage.getItem('bp_products') || '[]');
      const list = document.getElementById('productsList');

      if (products.length === 0) {
        list.innerHTML = '<p style="text-align: center; color: #999;">Okenn pwodwi ankor.</p>';
        return;
      }

      list.innerHTML = products.map((p, i) => `
        <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin-bottom: 12px; border-left: 4px solid #ff4747;">
          <strong>${p.title}</strong> - $${p.price}
          <br><small style="color: #666;">${p.category} | St√≤k: ${p.stock}</small>
        </div>
      `).join('');
    }

    // Logout
    function logout() {
      if (confirm('√àske ou swe ou vle louje soti?')) {
        localStorage.removeItem(AUTH_TOKEN_KEY);
        localStorage.removeItem(AUTH_TIME_KEY);
        window.location.href = '/';
      }
    }

    // Clear auth
    function clearAuth() {
      if (confirm('Efase tout sesyon st√≤raj?')) {
        localStorage.removeItem(AUTH_TOKEN_KEY);
        localStorage.removeItem(AUTH_TIME_KEY);
        alert('Sesyon efase. Retounen login.');
        window.location.href = '/admin/login.html';
      }
    }

    // Reload products
    function reloadProducts() {
      loadProducts();
    }

    // Display token
    function displayToken() {
      const token = localStorage.getItem(AUTH_TOKEN_KEY);
      if (token) {
        document.getElementById('tokenDisplay').textContent = token.substring(0, 20) + '...';
      }
    }

    // Initialize
    if (checkAuthentication()) {
      displayToken();
      loadProducts();
    }
  </script>
</body>
</html>
