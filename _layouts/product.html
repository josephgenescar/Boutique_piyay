---
layout: default
---

<<<<<<< HEAD
<div class="breadcrumb-container" style="padding: 20px 4%; background: #f9f9f9; font-size: 14px; color: #666;">
  <div class="container">
    <a href="/" style="text-decoration:none; color:#ff4747;">Accueil</a> /
    <span style="color:#999;">{{ page.category | capitalize }}</span> /
    <strong>{{ page.title }}</strong>
  </div>
</div>

<div class="container" style="padding: 40px 20px;">
  <div class="product-detail-flex" style="display: flex; gap: 50px; flex-wrap: wrap;">

    <!-- GAUCHE: IMAGE -->
    <div class="product-gallery" style="flex: 1; min-width: 320px;">
      <div class="main-img-box" style="width: 100%; aspect-ratio: 1/1; border-radius: 20px; overflow: hidden; border: 1px solid #eee; background: #fff; box-shadow: 0 10px 30px rgba(0,0,0,0.05);">
        <img id="current-main-img" src="{{ page.image }}" alt="{{ page.title }}" style="width: 100%; height: 100%; object-fit: contain;">
      </div>

      {% if page.images %}
      <div class="thumb-list" style="display: flex; gap: 10px; margin-top: 20px; overflow-x: auto; padding-bottom: 10px;">
        <div class="thumb active" onclick="updateMainImg('{{ page.image }}', this)" style="width: 70px; height: 70px; border-radius: 10px; border: 2px solid #ff4747; cursor: pointer; overflow: hidden; flex-shrink: 0;">
          <img src="{{ page.image }}" style="width:100%; height:100%; object-fit:cover;">
        </div>
        {% for img in page.images %}
        <div class="thumb" onclick="updateMainImg('{{ img.img }}', this)" style="width: 70px; height: 70px; border-radius: 10px; border: 2px solid #eee; cursor: pointer; overflow: hidden; flex-shrink: 0;">
          <img src="{{ img.img }}" style="width:100%; height:100%; object-fit:cover;">
        </div>
        {% endfor %}
      </div>
      {% endif %}
    </div>

    <!-- DROITE: INFO -->
    <div class="product-info" style="flex: 1.2; min-width: 320px;">
      <span style="background: #fff0f0; color: #ff4747; padding: 5px 12px; border-radius: 50px; font-size: 12px; font-weight: 700; text-transform: uppercase; letter-spacing: 1px;">{{ page.category }}</span>
      <h1 style="font-size: 2.5rem; margin: 15px 0; color: #222; font-weight: 900; line-height: 1.1;">{{ page.title }}</h1>

      <div class="price-box" style="margin: 25px 0; display: flex; align-items: center; gap: 20px;">
        <span style="font-size: 36px; font-weight: 900; color: #ff4747;">{{ page.price }} HTG</span>
        {% if page.old_price %}
        <span style="text-decoration: line-through; color: #bbb; font-size: 20px;">{{ page.old_price }} HTG</span>
        {% endif %}
      </div>

      <div style="padding: 20px; background: #fdfdfd; border: 1px solid #f0f0f0; border-radius: 15px; margin-bottom: 30px;">
        <div style="margin-bottom: 15px; font-weight: 600; color: #444;">QuantitÃ© :</div>
        <div class="qty-selector" style="display: inline-flex; border: 2px solid #eee; border-radius: 10px; overflow: hidden; background: #fff;">
          <button onclick="changeQty(-1)" style="width: 45px; height: 45px; border: none; background: none; font-size: 20px; cursor: pointer; transition: 0.2s;">-</button>
          <input type="number" id="prod-qty" value="1" min="1" style="width: 60px; text-align: center; border: none; font-weight: 800; font-size: 18px; outline: none;">
          <button onclick="changeQty(1)" style="width: 45px; height: 45px; border: none; background: none; font-size: 20px; cursor: pointer; transition: 0.2s;">+</button>
        </div>
      </div>

      <div class="actions" style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
        <button onclick="orderProduct('{{ page.title }}', '{{ page.price }}', '{{ page.id }}', '{{ page.image }}')" style="padding: 18px; background: #222; color: white; border: none; border-radius: 12px; font-weight: 800; font-size: 16px; cursor: pointer; transition: 0.3s; display: flex; align-items: center; justify-content: center; gap: 10px;">
          ğŸ›’ Ajouter au panier
        </button>
        <button onclick="buyNow('{{ page.title }}', '{{ page.price }}', '{{ page.id }}', '{{ page.image }}')" style="padding: 18px; background: #ff4747; color: white; border: none; border-radius: 12px; font-weight: 800; font-size: 16px; cursor: pointer; transition: 0.3s; box-shadow: 0 10px 25px rgba(255, 71, 71, 0.3);">
          âš¡ Acheter maintenant
        </button>
      </div>

      <div style="margin-top: 30px; border-top: 1px solid #eee; padding-top: 25px;">
        <div style="display: flex; gap: 20px; flex-wrap: wrap;">
          <div style="display: flex; align-items: center; gap: 8px; font-size: 13px; color: #666;">
            âœ… Produit en stock
          </div>
          <div style="display: flex; align-items: center; gap: 8px; font-size: 13px; color: #666;">
            ğŸ›¡ï¸ Paiement sÃ©curisÃ©
          </div>
          <div style="display: flex; align-items: center; gap: 8px; font-size: 13px; color: #666;">
            ğŸšš Livraison 24-48h
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- DESCRIPTION -->
  <div class="product-description" style="margin-top: 60px; border-top: 1px solid #eee; padding-top: 40px;">
    <h2 style="font-size: 1.8rem; font-weight: 800; margin-bottom: 25px;">Description du produit</h2>
    <div class="content" style="line-height: 1.8; color: #555; font-size: 1.1rem;">
      {{ content }}
    </div>
  </div>
</div>

<style>
.qty-selector button:hover { background: #f9f9f9; color: #ff4747; }
.actions button:hover { transform: translateY(-3px); }
.thumb:hover { border-color: #ff4747; }
=======
<style>
  @import url('https://fonts.googleapis.com/css2?family=Sora:wght@400;600;700;800&family=DM+Sans:wght@400;500;600&display=swap');

  :root {
    --orange: #FF5722;
    --orange-light: #FF7043;
    --orange-pale: #FFF3EF;
    --navy: #0D1B2A;
    --navy-light: #1A2E45;
    --gold: #FFB300;
    --green: #00C853;
    --red: #F44336;
    --gray-100: #F8F9FA;
    --gray-200: #EAEDF0;
    --gray-500: #8A94A6;
    --gray-700: #4A5568;
    --white: #FFFFFF;
    --shadow-sm: 0 1px 4px rgba(0,0,0,0.08);
    --shadow-md: 0 4px 16px rgba(0,0,0,0.12);
    --radius: 16px;
    --radius-sm: 10px;
  }

  * { box-sizing: border-box; }
  body { font-family: 'DM Sans', sans-serif; background: #F4F5F7; color: var(--navy); }

  /* ========== BREADCRUMB ========== */
  .breadcrumb {
    max-width: 1300px;
    margin: 0 auto;
    padding: 14px 20px 0;
    font-size: 0.82rem;
    color: var(--gray-500);
    display: flex;
    align-items: center;
    gap: 6px;
    flex-wrap: wrap;
  }
  .breadcrumb a { color: var(--orange); text-decoration: none; font-weight: 600; }
  .breadcrumb a:hover { text-decoration: underline; }
  .breadcrumb span { color: var(--gray-500); }

  /* ========== PRODUCT SECTION ========== */
  .product-section {
    max-width: 1300px;
    margin: 16px auto;
    padding: 0 16px;
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 28px;
    align-items: start;
  }

  /* ========== GALLERY ========== */
  .gallery {
    position: sticky;
    top: 80px;
  }
  .gallery-main {
    border-radius: var(--radius);
    overflow: hidden;
    background: var(--white);
    box-shadow: var(--shadow-sm);
    position: relative;
    aspect-ratio: 1;
    cursor: zoom-in;
  }
  .gallery-main img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.4s;
    display: block;
  }
  .gallery-main:hover img { transform: scale(1.05); }

  .gallery-badge-group {
    position: absolute;
    top: 14px; left: 14px;
    display: flex; flex-direction: column; gap: 6px;
    z-index: 2;
  }
  .g-badge {
    padding: 4px 10px;
    border-radius: 100px;
    font-size: 0.72rem;
    font-weight: 800;
    font-family: 'Sora', sans-serif;
  }
  .g-badge-hot { background: var(--orange); color: white; }
  .g-badge-new { background: var(--green); color: white; }
  .g-badge-disc { background: #FFE0D0; color: var(--orange); }

  .gallery-share {
    position: absolute;
    top: 14px; right: 14px;
    display: flex; flex-direction: column; gap: 6px;
  }
  .share-btn {
    width: 36px; height: 36px;
    border-radius: 50%;
    background: rgba(255,255,255,0.9);
    border: none;
    cursor: pointer;
    display: flex; align-items: center; justify-content: center;
    font-size: 1rem;
    box-shadow: var(--shadow-sm);
    backdrop-filter: blur(4px);
    transition: transform 0.2s;
  }
  .share-btn:hover { transform: scale(1.1); }

  .gallery-thumbs {
    display: flex;
    gap: 8px;
    margin-top: 12px;
    flex-wrap: wrap;
  }
  .thumb {
    width: 68px; height: 68px;
    border-radius: 10px;
    overflow: hidden;
    cursor: pointer;
    border: 2.5px solid transparent;
    transition: all 0.2s;
    background: var(--white);
    box-shadow: var(--shadow-sm);
    flex-shrink: 0;
  }
  .thumb.active { border-color: var(--orange); }
  .thumb img { width: 100%; height: 100%; object-fit: cover; }

  /* ========== PRODUCT INFO PANEL ========== */
  .product-panel {
    background: var(--white);
    border-radius: var(--radius);
    box-shadow: var(--shadow-sm);
    padding: 28px;
  }

  .product-meta-top {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 10px;
    flex-wrap: wrap;
  }
  .product-category-badge {
    padding: 4px 12px;
    background: var(--orange-pale);
    color: var(--orange);
    border-radius: 100px;
    font-size: 0.75rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.06em;
  }
  .product-sku {
    font-size: 0.75rem;
    color: var(--gray-500);
  }

  .product-title-main {
    font-family: 'Sora', sans-serif;
    font-size: 1.65rem;
    font-weight: 800;
    color: var(--navy);
    line-height: 1.25;
    margin-bottom: 14px;
  }

  /* Rating */
  .rating-row {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 18px;
    flex-wrap: wrap;
  }
  .stars-display { display: flex; gap: 2px; }
  .star-full { color: var(--gold); font-size: 1rem; }
  .star-empty { color: var(--gray-200); font-size: 1rem; }
  .rating-num { font-weight: 700; color: var(--navy); }
  .rating-count { color: var(--gray-500); font-size: 0.85rem; }
  .sold-count { color: var(--gray-500); font-size: 0.85rem; }
  .sold-count span { color: var(--navy); font-weight: 600; }

  /* Price */
  .price-block {
    background: var(--orange-pale);
    border-radius: var(--radius-sm);
    padding: 16px 20px;
    margin-bottom: 20px;
    display: flex;
    align-items: center;
    gap: 14px;
    flex-wrap: wrap;
  }
  .price-main {
    font-family: 'Sora', sans-serif;
    font-size: 2rem;
    font-weight: 800;
    color: var(--orange);
  }
  .price-original {
    font-size: 1rem;
    color: var(--gray-500);
    text-decoration: line-through;
  }
  .price-badge {
    background: var(--orange);
    color: white;
    padding: 4px 10px;
    border-radius: 100px;
    font-size: 0.8rem;
    font-weight: 800;
    font-family: 'Sora', sans-serif;
  }

  /* Divider */
  .divider {
    border: none;
    border-top: 1px solid var(--gray-200);
    margin: 18px 0;
  }

  /* Variants */
  .variant-section { margin-bottom: 18px; }
  .variant-label {
    font-size: 0.85rem;
    font-weight: 700;
    color: var(--gray-700);
    margin-bottom: 8px;
    display: flex;
    align-items: center;
    gap: 6px;
  }
  .variant-label .selected-val {
    font-weight: 400;
    color: var(--orange);
    background: var(--orange-pale);
    padding: 2px 8px;
    border-radius: 100px;
    font-size: 0.8rem;
  }
  .variant-options { display: flex; flex-wrap: wrap; gap: 8px; }
  .variant-opt {
    padding: 7px 16px;
    border-radius: 100px;
    border: 2px solid var(--gray-200);
    font-size: 0.85rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.15s;
    background: white;
    color: var(--gray-700);
    font-family: 'DM Sans', sans-serif;
  }
  .variant-opt:hover { border-color: var(--orange); color: var(--orange); }
  .variant-opt.active {
    border-color: var(--orange);
    background: var(--orange);
    color: white;
  }
  .variant-opt.unavailable {
    opacity: 0.4;
    cursor: not-allowed;
    text-decoration: line-through;
  }
  /* Color swatches */
  .color-swatch {
    width: 34px; height: 34px;
    border-radius: 50%;
    border: 2px solid var(--gray-200);
    cursor: pointer;
    transition: all 0.15s;
    position: relative;
  }
  .color-swatch.active { border-color: var(--orange); box-shadow: 0 0 0 3px var(--orange-pale); }
  .color-swatch::after {
    content: attr(title);
    position: absolute;
    bottom: -22px; left: 50%;
    transform: translateX(-50%);
    font-size: 0.65rem;
    color: var(--gray-500);
    white-space: nowrap;
  }

  /* Quantity */
  .quantity-row {
    display: flex;
    align-items: center;
    gap: 14px;
    margin-bottom: 20px;
    flex-wrap: wrap;
  }
  .qty-label { font-size: 0.85rem; font-weight: 700; color: var(--gray-700); }
  .qty-control {
    display: flex;
    align-items: center;
    border: 2px solid var(--gray-200);
    border-radius: var(--radius-sm);
    overflow: hidden;
  }
  .qty-btn {
    width: 38px; height: 38px;
    background: var(--gray-100);
    border: none;
    cursor: pointer;
    font-size: 1.1rem;
    display: flex; align-items: center; justify-content: center;
    transition: background 0.15s;
    color: var(--navy);
    font-weight: 700;
  }
  .qty-btn:hover { background: var(--orange-pale); color: var(--orange); }
  .qty-num {
    width: 48px;
    text-align: center;
    font-family: 'Sora', sans-serif;
    font-size: 1rem;
    font-weight: 700;
    border: none;
    outline: none;
    color: var(--navy);
  }
  .stock-info { font-size: 0.82rem; color: var(--green); font-weight: 600; }
  .stock-info.low { color: var(--red); }

  /* CTA Buttons */
  .cta-group { display: flex; gap: 10px; margin-bottom: 18px; }
  .btn-add-cart {
    flex: 1;
    padding: 14px 20px;
    background: var(--orange);
    color: white;
    border: none;
    border-radius: var(--radius-sm);
    font-family: 'Sora', sans-serif;
    font-size: 1rem;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.2s;
    display: flex; align-items: center; justify-content: center; gap: 8px;
  }
  .btn-add-cart:hover { background: var(--orange-light); transform: translateY(-1px); box-shadow: 0 4px 14px rgba(255,87,34,0.35); }
  .btn-whatsapp {
    padding: 14px 20px;
    background: #25D366;
    color: white;
    border: none;
    border-radius: var(--radius-sm);
    font-family: 'Sora', sans-serif;
    font-size: 0.9rem;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.2s;
    text-decoration: none;
    display: flex; align-items: center; justify-content: center; gap: 6px;
    white-space: nowrap;
  }
  .btn-whatsapp:hover { background: #20b858; transform: translateY(-1px); }
  .btn-wishlist {
    width: 50px; height: 50px;
    background: var(--gray-100);
    border: 2px solid var(--gray-200);
    border-radius: var(--radius-sm);
    cursor: pointer;
    font-size: 1.2rem;
    display: flex; align-items: center; justify-content: center;
    transition: all 0.2s;
    flex-shrink: 0;
  }
  .btn-wishlist:hover, .btn-wishlist.active { background: #FFE0D0; border-color: var(--orange); }

  /* Trust badges */
  .trust-badges {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 10px;
    padding: 14px;
    background: var(--gray-100);
    border-radius: var(--radius-sm);
    margin-bottom: 18px;
  }
  .trust-item {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 0.78rem;
    color: var(--gray-700);
    font-weight: 500;
  }
  .trust-icon { font-size: 1.1rem; }

  /* Product details accordion */
  .accordion-item {
    border: 1.5px solid var(--gray-200);
    border-radius: var(--radius-sm);
    margin-bottom: 8px;
    overflow: hidden;
  }
  .accordion-header {
    padding: 14px 16px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    cursor: pointer;
    font-weight: 600;
    font-size: 0.9rem;
    background: white;
    transition: background 0.15s;
  }
  .accordion-header:hover { background: var(--gray-100); }
  .accordion-header .arrow { transition: transform 0.25s; }
  .accordion-header.open .arrow { transform: rotate(180deg); }
  .accordion-body {
    padding: 0 16px;
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.3s ease, padding 0.2s;
    font-size: 0.88rem;
    color: var(--gray-700);
    line-height: 1.7;
  }
  .accordion-body.open { max-height: 600px; padding: 0 16px 16px; }

  /* ========== REVIEWS SECTION ========== */
  .reviews-section {
    max-width: 1300px;
    margin: 28px auto;
    padding: 0 16px;
    background: white;
    border-radius: var(--radius);
    box-shadow: var(--shadow-sm);
    padding: 28px;
  }
  .section-title {
    font-family: 'Sora', sans-serif;
    font-size: 1.2rem;
    font-weight: 800;
    color: var(--navy);
    margin-bottom: 20px;
    display: flex;
    align-items: center;
    gap: 8px;
  }
  .reviews-summary {
    display: grid;
    grid-template-columns: auto 1fr;
    gap: 30px;
    margin-bottom: 24px;
    align-items: center;
    padding: 20px;
    background: var(--gray-100);
    border-radius: var(--radius-sm);
  }
  .review-big-score {
    text-align: center;
  }
  .review-big-num {
    font-family: 'Sora', sans-serif;
    font-size: 3rem;
    font-weight: 800;
    color: var(--orange);
    line-height: 1;
  }
  .review-big-stars { font-size: 1.1rem; color: var(--gold); margin: 6px 0; }
  .review-big-count { font-size: 0.8rem; color: var(--gray-500); }
  .review-bars { flex: 1; }
  .review-bar-row {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 6px;
    font-size: 0.82rem;
  }
  .review-bar-label { width: 20px; text-align: right; color: var(--gray-500); font-weight: 600; }
  .review-bar-track {
    flex: 1;
    height: 6px;
    background: var(--gray-200);
    border-radius: 3px;
    overflow: hidden;
  }
  .review-bar-fill {
    height: 100%;
    background: var(--gold);
    border-radius: 3px;
  }
  .review-bar-pct { width: 30px; color: var(--gray-500); font-size: 0.78rem; }

  /* Add review form */
  .add-review-toggle {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 10px 18px;
    background: var(--navy);
    color: white;
    border: none;
    border-radius: var(--radius-sm);
    font-family: 'Sora', sans-serif;
    font-size: 0.88rem;
    font-weight: 700;
    cursor: pointer;
    margin-bottom: 20px;
    transition: background 0.2s;
  }
  .add-review-toggle:hover { background: var(--navy-light); }

  .review-form {
    background: var(--gray-100);
    border-radius: var(--radius-sm);
    padding: 20px;
    margin-bottom: 20px;
    display: none;
  }
  .review-form.open { display: block; animation: fadeIn 0.3s; }
  @keyframes fadeIn { from { opacity: 0; transform: translateY(-8px); } to { opacity: 1; transform: translateY(0); } }

  .star-selector {
    display: flex;
    gap: 4px;
    margin-bottom: 12px;
    font-size: 1.5rem;
    cursor: pointer;
  }
  .star-sel { color: var(--gray-200); transition: color 0.15s; }
  .star-sel.active { color: var(--gold); }

  .review-form input, .review-form textarea {
    width: 100%;
    padding: 10px 14px;
    border: 1.5px solid var(--gray-200);
    border-radius: var(--radius-sm);
    font-family: 'DM Sans', sans-serif;
    font-size: 0.9rem;
    outline: none;
    margin-bottom: 10px;
    background: white;
    transition: border-color 0.2s;
  }
  .review-form input:focus, .review-form textarea:focus { border-color: var(--orange); }
  .review-form textarea { resize: vertical; min-height: 90px; }
  .submit-review-btn {
    padding: 10px 24px;
    background: var(--orange);
    color: white;
    border: none;
    border-radius: var(--radius-sm);
    font-family: 'Sora', sans-serif;
    font-size: 0.88rem;
    font-weight: 700;
    cursor: pointer;
    transition: background 0.2s;
  }
  .submit-review-btn:hover { background: var(--orange-light); }

  /* Review list */
  .review-list { display: flex; flex-direction: column; gap: 16px; }
  .review-item {
    padding: 16px;
    background: var(--gray-100);
    border-radius: var(--radius-sm);
    border: 1.5px solid var(--gray-200);
  }
  .review-header {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 8px;
    flex-wrap: wrap;
  }
  .reviewer-avatar {
    width: 36px; height: 36px;
    border-radius: 50%;
    background: var(--orange);
    color: white;
    display: flex; align-items: center; justify-content: center;
    font-family: 'Sora', sans-serif;
    font-size: 0.85rem;
    font-weight: 700;
    flex-shrink: 0;
  }
  .reviewer-name { font-weight: 700; font-size: 0.9rem; }
  .reviewer-stars { color: var(--gold); font-size: 0.85rem; margin-left: auto; }
  .reviewer-date { font-size: 0.75rem; color: var(--gray-500); }
  .review-text { font-size: 0.88rem; color: var(--gray-700); line-height: 1.6; }
  .verified-badge {
    font-size: 0.72rem;
    background: #E8F5E9;
    color: var(--green);
    padding: 2px 8px;
    border-radius: 100px;
    font-weight: 600;
  }

  /* ========== RELATED PRODUCTS ========== */
  .related-section {
    max-width: 1300px;
    margin: 28px auto 40px;
    padding: 0 16px;
  }
  .related-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
    gap: 14px;
    margin-top: 16px;
  }
  .related-card {
    background: white;
    border-radius: var(--radius-sm);
    overflow: hidden;
    box-shadow: var(--shadow-sm);
    cursor: pointer;
    transition: all 0.25s;
    text-decoration: none;
    color: inherit;
    display: block;
  }
  .related-card:hover { transform: translateY(-3px); box-shadow: var(--shadow-md); }
  .related-img {
    aspect-ratio: 1;
    overflow: hidden;
    background: var(--gray-100);
  }
  .related-img img { width: 100%; height: 100%; object-fit: cover; transition: transform 0.3s; }
  .related-card:hover .related-img img { transform: scale(1.05); }
  .related-info { padding: 10px 12px; }
  .related-title {
    font-family: 'Sora', sans-serif;
    font-size: 0.82rem;
    font-weight: 600;
    margin-bottom: 4px;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
  .related-price { font-family: 'Sora', sans-serif; font-size: 0.95rem; font-weight: 800; color: var(--orange); }

  /* ========== RESPONSIVE ========== */
  @media (max-width: 860px) {
    .product-section { grid-template-columns: 1fr; gap: 18px; }
    .gallery { position: static; }
  }
  @media (max-width: 540px) {
    .product-panel { padding: 18px; }
    .product-title-main { font-size: 1.3rem; }
    .price-main { font-size: 1.6rem; }
    .cta-group { flex-direction: column; }
    .trust-badges { grid-template-columns: 1fr; }
    .reviews-summary { grid-template-columns: 1fr; }
  }
>>>>>>> d027aac2b72f348e19ef15fafbba28d44bd28a87
</style>

<!-- BREADCRUMB -->
<div class="breadcrumb">
  <a href="{{ site.baseurl }}/">ğŸ  AkÃ¨y</a> â€º
  <a href="{{ site.baseurl }}/shop/">Boutik</a> â€º
  {% if page.category %}
    <a href="{{ site.baseurl }}/kategori/{{ page.category | slugify }}/">{{ page.category | capitalize }}</a> â€º
  {% endif %}
  <span>{{ page.title | truncate: 40 }}</span>
</div>

<!-- PRODUCT SECTION -->
<div class="product-section">

  <!-- GALLERY -->
  <div class="gallery">
    <div class="gallery-main" id="mainImgWrap">
      <img id="mainImg"
           src="{{ page.featured_image | relative_url }}"
           alt="{{ page.title }}"
           onerror="this.src='https://via.placeholder.com/600x600/F4F5F7/999?text=ğŸ“¦'">

      <!-- Badges -->
      <div class="gallery-badge-group">
        {% if page.featured %}<span class="g-badge g-badge-hot">âš¡ Flash</span>{% endif %}
        {% if page.new %}<span class="g-badge g-badge-new">ğŸ†• Nouvo</span>{% endif %}
        {% if page.original_price %}
          <span class="g-badge g-badge-disc">
            -{{ page.original_price | minus: page.price | times: 100 | divided_by: page.original_price | round }}%
          </span>
        {% endif %}
      </div>

      <!-- Share buttons -->
      <div class="gallery-share">
        <button class="share-btn" onclick="shareWhatsApp()" title="Pataje sou WhatsApp">ğŸ’¬</button>
        <button class="share-btn" onclick="copyLink()" title="Kopye lyen">ğŸ”—</button>
      </div>
    </div>

    <!-- Thumbnails -->
    {% assign all_images = "" | split: "" %}
    {% assign all_images = all_images | push: page.featured_image %}
    {% if page.images %}
      {% for img in page.images %}
        {% assign all_images = all_images | push: img.image %}
      {% endfor %}
    {% endif %}

    {% if all_images.size > 1 %}
    <div class="gallery-thumbs">
      {% for img in all_images %}
        <div class="thumb {% if forloop.first %}active{% endif %}"
             onclick="switchImg('{{ img | relative_url }}', this)">
          <img src="{{ img | relative_url }}" alt="Photo {{ forloop.index }}" loading="lazy">
        </div>
      {% endfor %}
    </div>
    {% endif %}
  </div>

  <!-- PRODUCT PANEL -->
  <div class="product-panel">

    <div class="product-meta-top">
      <span class="product-category-badge">{{ page.category | capitalize | default: "Pwodwi" }}</span>
      {% if page.sku %}<span class="product-sku">SKU: {{ page.sku }}</span>{% endif %}
    </div>

    <h1 class="product-title-main">{{ page.title }}</h1>

    <!-- Ratings -->
    <div class="rating-row">
      <div class="stars-display" id="starsDisplay">
        <!-- Filled dynamically by JS -->
      </div>
      <span class="rating-num" id="ratingNum">0.0</span>
      <span class="rating-count" id="ratingCount">(0 evaliyasyon)</span>
      <span class="sold-count">â€¢ <span id="soldCount">{{ page.sold_count | default: 0 }}</span> vann</span>
    </div>

    <!-- Price -->
    <div class="price-block">
      <span class="price-main">{{ page.price | number_with_delimiter }} HTG</span>
      {% if page.original_price %}
        <span class="price-original">{{ page.original_price | number_with_delimiter }} HTG</span>
        <span class="price-badge">
          -{{ page.original_price | minus: page.price | times: 100 | divided_by: page.original_price | round }}% rediksyon
        </span>
      {% endif %}
    </div>

    <hr class="divider">

    <!-- Variants -->
    {% if page.variants %}
      {% assign variant_types = page.variants | map: "type" | uniq %}
      {% for vtype in variant_types %}
        <div class="variant-section">
          <div class="variant-label">
            {{ vtype }}:
            <span class="selected-val" id="val-{{ vtype | slugify }}">...</span>
          </div>
          <div class="variant-options">
            {% assign is_color = false %}
            {% if vtype == "KoulÃ¨" or vtype == "Couleur" or vtype == "Color" %}
              {% assign is_color = true %}
            {% endif %}

            {% for v in page.variants %}
              {% if v.type == vtype %}
                {% if is_color %}
                  <div class="color-swatch {% unless v.in_stock %}unavailable{% endunless %}"
                       style="background: {{ v.color_hex | default: '#ccc' }};"
                       title="{{ v.name }}"
                       data-type="{{ vtype | slugify }}"
                       data-val="{{ v.name }}"
                       onclick="selectVariant('{{ vtype | slugify }}', '{{ v.name }}', this)">
                  </div>
                {% else %}
                  <button class="variant-opt {% unless v.in_stock %}unavailable{% endunless %}"
                          data-type="{{ vtype | slugify }}"
                          data-val="{{ v.name }}"
                          {% unless v.in_stock %}disabled{% endunless %}
                          onclick="selectVariant('{{ vtype | slugify }}', '{{ v.name }}', this)">
                    {{ v.name }}
                  </button>
                {% endif %}
              {% endif %}
            {% endfor %}
          </div>
        </div>
        <hr class="divider">
      {% endfor %}
    {% endif %}

    <!-- Quantity -->
    <div class="quantity-row">
      <span class="qty-label">Kantite:</span>
      <div class="qty-control">
        <button class="qty-btn" onclick="changeQty(-1)">âˆ’</button>
        <input class="qty-num" type="number" id="qtyInput" value="1" min="1" max="{{ page.stock_quantity | default: 99 }}">
        <button class="qty-btn" onclick="changeQty(1)">+</button>
      </div>
      {% if page.in_stock %}
        {% if page.stock_quantity and page.stock_quantity < 10 %}
          <span class="stock-info low">âš ï¸ {{ page.stock_quantity }} sÃ¨lman rete!</span>
        {% else %}
          <span class="stock-info">âœ… Disponib</span>
        {% endif %}
      {% else %}
        <span class="stock-info low">âŒ Pa disponib</span>
      {% endif %}
    </div>

    <!-- CTA Buttons -->
    <div class="cta-group">
      {% if page.in_stock %}
        <button class="btn-add-cart" id="addCartBtn"
                onclick="addToCartProduct('{{ page.title | escape }}', {{ page.price }}, '{{ page.featured_image | relative_url }}')">
          ğŸ›’ Ajoute nan Panier
        </button>
        <a class="btn-whatsapp"
           href="https://wa.me/50948868964?text=Bonjou!%20Mwen%20vle%20kÃ²mande:%20{{ page.title | uri_escape }}%20-%20{{ page.price }}%20HTG"
           target="_blank">
          ğŸ’¬ KÃ²mande
        </a>
      {% else %}
        <button class="btn-add-cart" style="background:var(--gray-500);cursor:not-allowed" disabled>
          âŒ Pa Disponib
        </button>
        <a class="btn-whatsapp"
           href="https://wa.me/50948868964?text=Ãˆske%20{{ page.title | uri_escape }}%20ap%20disponib%20byento?"
           target="_blank">
          ğŸ’¬ Mande Info
        </a>
      {% endif %}
      <button class="btn-wishlist" id="wishBtn"
              onclick="toggleWishlist('{{ page.title | escape }}', '{{ page.url | relative_url }}')">
        ğŸ¤
      </button>
    </div>

    <!-- Trust Badges -->
    <div class="trust-badges">
      <div class="trust-item"><span class="trust-icon">ğŸšš</span> Livrezon 24-48h Ayiti</div>
      <div class="trust-item"><span class="trust-icon">âœ…</span> Pwodwi 100% Otantik</div>
      <div class="trust-item"><span class="trust-icon">ğŸ’³</span> MonCash / NatCash</div>
      <div class="trust-item"><span class="trust-icon">ğŸ”„</span> Retou Gratis 7 jou</div>
    </div>

    <!-- Accordion -->
    <div class="accordion-item">
      <div class="accordion-header" onclick="toggleAccordion(this)">
        ğŸ“‹ Desksripyon <span class="arrow">â–¼</span>
      </div>
      <div class="accordion-body">
        {{ content }}
      </div>
    </div>

    {% if page.shipping_info %}
    <div class="accordion-item">
      <div class="accordion-header" onclick="toggleAccordion(this)">
        ğŸšš Livrezon ak Retou <span class="arrow">â–¼</span>
      </div>
      <div class="accordion-body">{{ page.shipping_info }}</div>
    </div>
    {% endif %}

    {% if page.care_instructions %}
    <div class="accordion-item">
      <div class="accordion-header" onclick="toggleAccordion(this)">
        ğŸ’¡ KonsÃ¨y Swen <span class="arrow">â–¼</span>
      </div>
      <div class="accordion-body">{{ page.care_instructions }}</div>
    </div>
    {% endif %}
  </div>
</div>

<!-- REVIEWS SECTION -->
<div class="reviews-section" id="reviewsSection" style="max-width:1300px;margin:28px auto;padding:28px;">
  <div class="section-title">â­ Evaliyasyon Kliyan</div>

  <div class="reviews-summary">
    <div class="review-big-score">
      <div class="review-big-num" id="bigScore">0.0</div>
      <div class="review-big-stars" id="bigStars">â˜†â˜†â˜†â˜†â˜†</div>
      <div class="review-big-count" id="bigCount">0 evaliyasyon</div>
    </div>
    <div class="review-bars" id="reviewBars"></div>
  </div>

  <button class="add-review-toggle" onclick="toggleReviewForm()">
    âœï¸ Ekri yon Evaliyasyon
  </button>

  <div class="review-form" id="reviewForm">
    <div class="star-selector" id="starSelector">
      <span class="star-sel" data-v="1" onclick="setRating(1)">â˜…</span>
      <span class="star-sel" data-v="2" onclick="setRating(2)">â˜…</span>
      <span class="star-sel" data-v="3" onclick="setRating(3)">â˜…</span>
      <span class="star-sel" data-v="4" onclick="setRating(4)">â˜…</span>
      <span class="star-sel" data-v="5" onclick="setRating(5)">â˜…</span>
    </div>
    <input type="text" id="reviewName" placeholder="Non ou *">
    <textarea id="reviewText" placeholder="Panse ou sou pwodwi sa a..."></textarea>
    <button class="submit-review-btn" onclick="submitReview()">ğŸ“¤ Voye Evaliyasyon</button>
  </div>

  <div class="review-list" id="reviewList">
    <!-- Reviews rendered by JS -->
  </div>
</div>

<!-- RELATED PRODUCTS -->
{% assign related = site.products | where: "category", page.category | where: "in_stock", true %}
{% if related.size > 1 %}
<div class="related-section" style="max-width:1300px;margin:28px auto 40px;padding:0 16px;">
  <div class="section-title" style="font-family:'Sora',sans-serif;font-size:1.2rem;font-weight:800;color:var(--navy,#0D1B2A);display:flex;align-items:center;gap:8px;">
    ğŸ”„ Pwodwi SimilÃ¨
  </div>
  <div class="related-grid">
    {% for rel in related limit: 6 %}
      {% unless rel.url == page.url %}
        <a class="related-card" href="{{ rel.url | relative_url }}">
          <div class="related-img">
            <img src="{{ rel.featured_image | relative_url }}" alt="{{ rel.title }}" loading="lazy"
                 onerror="this.src='https://via.placeholder.com/300x300/F4F5F7/999?text=ğŸ“¦'">
          </div>
          <div class="related-info">
            <div class="related-title">{{ rel.title }}</div>
            <div class="related-price">{{ rel.price | number_with_delimiter }} HTG</div>
          </div>
        </a>
      {% endunless %}
    {% endfor %}
  </div>
</div>
{% endif %}

<script>
<<<<<<< HEAD
function updateMainImg(src, el) {
  document.getElementById('current-main-img').src = src;
  document.querySelectorAll('.thumb').forEach(t => {
    t.style.borderColor = '#eee';
    t.classList.remove('active');
  });
  el.style.borderColor = '#ff4747';
  el.classList.add('active');
=======
const PRODUCT_KEY = 'reviews_{{ page.title | slugify | replace: "-", "_" }}';
let selectedRating = 0;
let wishlist = JSON.parse(localStorage.getItem('piyay_wishlist') || '[]');

// ============ GALLERY ============
function switchImg(src, thumbEl) {
  document.getElementById('mainImg').src = src;
  document.querySelectorAll('.thumb').forEach(t => t.classList.remove('active'));
  thumbEl.classList.add('active');
>>>>>>> d027aac2b72f348e19ef15fafbba28d44bd28a87
}

// ============ VARIANTS ============
function selectVariant(type, val, el) {
  document.querySelectorAll(`[data-type="${type}"]`).forEach(opt => opt.classList.remove('active'));
  el.classList.add('active');
  const label = document.getElementById('val-' + type);
  if (label) label.textContent = val;
}

<<<<<<< HEAD
function buyNow(title, price, id, image) {
  orderProduct(title, price, id, image);
  setTimeout(() => {
    window.location.href = '/checkout';
  }, 500);
=======
// Init first variants
document.querySelectorAll('.variant-opt:not(.unavailable), .color-swatch:not(.unavailable)').forEach(opt => {
  const type = opt.dataset.type;
  const existing = document.querySelector(`[data-type="${type}"].active`);
  if (!existing) {
    opt.classList.add('active');
    const label = document.getElementById('val-' + type);
    if (label) label.textContent = opt.dataset.val;
  }
});

// ============ QUANTITY ============
function changeQty(delta) {
  const inp = document.getElementById('qtyInput');
  let v = parseInt(inp.value) + delta;
  if (v < 1) v = 1;
  if (v > parseInt(inp.max || 99)) v = parseInt(inp.max || 99);
  inp.value = v;
>>>>>>> d027aac2b72f348e19ef15fafbba28d44bd28a87
}

// ============ ADD TO CART ============
function addToCartProduct(title, price, img) {
  const qty = parseInt(document.getElementById('qtyInput').value) || 1;
  const variants = {};
  document.querySelectorAll('[data-type].active').forEach(opt => {
    variants[opt.dataset.type] = opt.dataset.val;
  });

  let cartData = JSON.parse(localStorage.getItem('piyay_cart') || '[]');
  const key = title + JSON.stringify(variants);
  const existing = cartData.find(i => i.key === key);
  if (existing) {
    existing.quantity += qty;
  } else {
    cartData.push({ key, title, price, image: img, quantity: qty, variants });
  }
  localStorage.setItem('piyay_cart', JSON.stringify(cartData));

  // Update UI
  const btn = document.getElementById('addCartBtn');
  btn.textContent = 'âœ… Ajoute!';
  btn.style.background = 'var(--green)';
  setTimeout(() => {
    btn.innerHTML = 'ğŸ›’ Ajoute nan Panier';
    btn.style.background = '';
  }, 2000);

  // Update count in header
  const counts = document.querySelectorAll('[data-cart-count], .cart-count, #cartCount');
  const total = cartData.reduce((s, i) => s + i.quantity, 0);
  counts.forEach(c => c.textContent = total);
}

// ============ WISHLIST ============
function toggleWishlist(title, url) {
  const btn = document.getElementById('wishBtn');
  const idx = wishlist.findIndex(w => w.title === title);
  if (idx >= 0) {
    wishlist.splice(idx, 1);
    btn.textContent = 'ğŸ¤';
    showToast('ğŸ’” Retire nan wishlist');
  } else {
    wishlist.push({ title, url });
    btn.textContent = 'â¤ï¸';
    showToast('â¤ï¸ Ajoute nan wishlist!');
  }
  localStorage.setItem('piyay_wishlist', JSON.stringify(wishlist));
}

function initWishlist() {
  const title = document.querySelector('.product-title-main')?.textContent;
  if (wishlist.some(w => w.title === title)) {
    document.getElementById('wishBtn').textContent = 'â¤ï¸';
  }
}

// ============ REVIEWS ============
function loadReviews() {
  const reviews = JSON.parse(localStorage.getItem(PRODUCT_KEY) || '[]');
  renderReviews(reviews);
}

function renderReviews(reviews) {
  // Update stars display
  const avg = reviews.length > 0
    ? (reviews.reduce((s, r) => s + r.rating, 0) / reviews.length).toFixed(1)
    : 0;
  const cnt = reviews.length;

  document.getElementById('bigScore').textContent = avg;
  document.getElementById('bigStars').textContent = 'â˜…'.repeat(Math.round(avg)) + 'â˜†'.repeat(5 - Math.round(avg));
  document.getElementById('bigCount').textContent = cnt + ' evaliyasyon';
  document.getElementById('ratingNum').textContent = avg;
  document.getElementById('ratingCount').textContent = '(' + cnt + ' evaliyasyon)';

  // Stars display in header
  const starsHtml = [1,2,3,4,5].map(n =>
    `<span class="${n <= Math.round(avg) ? 'star-full' : 'star-empty'}">â˜…</span>`
  ).join('');
  document.getElementById('starsDisplay').innerHTML = starsHtml;

  // Bar chart
  const bars = document.getElementById('reviewBars');
  bars.innerHTML = '';
  [5,4,3,2,1].forEach(star => {
    const count = reviews.filter(r => r.rating === star).length;
    const pct = cnt > 0 ? Math.round(count / cnt * 100) : 0;
    bars.innerHTML += `<div class="review-bar-row">
      <span class="review-bar-label">${star}</span>
      <div class="review-bar-track"><div class="review-bar-fill" style="width:${pct}%"></div></div>
      <span class="review-bar-pct">${pct}%</span>
    </div>`;
  });

  // Review list
  const list = document.getElementById('reviewList');
  if (reviews.length === 0) {
    list.innerHTML = '<p style="color:var(--gray-500);font-size:0.9rem;text-align:center;padding:20px;">Okenn evaliyasyon poko. Soyez premye a evalye!</p>';
    return;
  }
  list.innerHTML = reviews.slice().reverse().map(r => `
    <div class="review-item">
      <div class="review-header">
        <div class="reviewer-avatar">${r.name.charAt(0).toUpperCase()}</div>
        <div>
          <div class="reviewer-name">${r.name}</div>
          <div class="reviewer-date">${new Date(r.date).toLocaleDateString('fr-HT', {year:'numeric',month:'short',day:'numeric'})}</div>
        </div>
        <div class="reviewer-stars">${'â˜…'.repeat(r.rating)}${'â˜†'.repeat(5 - r.rating)}</div>
        <span class="verified-badge">âœ“ Verifye</span>
      </div>
      <div class="review-text">${r.text}</div>
    </div>
  `).join('');
}

function toggleReviewForm() {
  document.getElementById('reviewForm').classList.toggle('open');
}

function setRating(v) {
  selectedRating = v;
  document.querySelectorAll('.star-sel').forEach(s => {
    s.classList.toggle('active', parseInt(s.dataset.v) <= v);
  });
}

function submitReview() {
  const name = document.getElementById('reviewName').value.trim();
  const text = document.getElementById('reviewText').value.trim();
  if (!name || !text || !selectedRating) {
    showToast('âš ï¸ Ranpli tout chan yo epi chwazi zetwal!');
    return;
  }
  const reviews = JSON.parse(localStorage.getItem(PRODUCT_KEY) || '[]');
  reviews.push({ name, text, rating: selectedRating, date: new Date().toISOString() });
  localStorage.setItem(PRODUCT_KEY, JSON.stringify(reviews));
  document.getElementById('reviewName').value = '';
  document.getElementById('reviewText').value = '';
  selectedRating = 0;
  document.querySelectorAll('.star-sel').forEach(s => s.classList.remove('active'));
  document.getElementById('reviewForm').classList.remove('open');
  renderReviews(reviews);
  showToast('ğŸ‰ MÃ¨si pou evaliyasyon ou a!');
}

// ============ ACCORDION ============
function toggleAccordion(header) {
  const body = header.nextElementSibling;
  const isOpen = body.classList.contains('open');
  // Close all
  document.querySelectorAll('.accordion-body').forEach(b => b.classList.remove('open'));
  document.querySelectorAll('.accordion-header').forEach(h => h.classList.remove('open'));
  if (!isOpen) {
    body.classList.add('open');
    header.classList.add('open');
  }
}

// Open first accordion
const firstAcc = document.querySelector('.accordion-header');
if (firstAcc) firstAcc.click();

// ============ SHARE ============
function shareWhatsApp() {
  const url = encodeURIComponent(window.location.href);
  const text = encodeURIComponent('Gade pwodwi sa a: {{ page.title | escape }} - {{ page.price }} HTG');
  window.open(`https://wa.me/?text=${text}%20${url}`, '_blank');
}

function copyLink() {
  navigator.clipboard.writeText(window.location.href)
    .then(() => showToast('âœ… Lyen kopye!'))
    .catch(() => showToast('âš ï¸ Pa kapab kopye'));
}

// ============ TOAST ============
function showToast(msg) {
  let t = document.getElementById('pdpToast');
  if (!t) {
    t = document.createElement('div');
    t.id = 'pdpToast';
    t.style.cssText = 'position:fixed;bottom:20px;right:20px;background:#0D1B2A;color:white;padding:12px 20px;border-radius:10px;font-family:Sora,sans-serif;font-size:0.88rem;font-weight:600;z-index:99999;box-shadow:0 8px 24px rgba(0,0,0,0.3);transform:translateY(80px);opacity:0;transition:all 0.3s;max-width:300px;';
    document.body.appendChild(t);
  }
  t.textContent = msg;
  t.style.transform = 'translateY(0)';
  t.style.opacity = '1';
  setTimeout(() => { t.style.transform = 'translateY(80px)'; t.style.opacity = '0'; }, 3000);
}

// ============ INIT ============
document.addEventListener('DOMContentLoaded', () => {
  loadReviews();
  initWishlist();
});
</script>
