---
layout: default
---

<div class="breadcrumb-container" style="padding: 20px 4%; background: #f9f9f9; font-size: 14px; color: #666;">
  <div class="container">
    <a href="/" style="text-decoration:none; color:#ff4747;">Accueil</a> /
    <span style="color:#999;">{{ page.category | capitalize }}</span> /
    <strong>{{ page.title }}</strong>
  </div>
</div>

<div class="container" style="padding: 40px 20px;">
  <div class="product-detail-flex" style="display: flex; gap: 50px; flex-wrap: wrap;">

    <!-- GAUCHE: IMAGE -->
    <div class="product-gallery" style="flex: 1; min-width: 320px;">
      <div class="main-img-box" style="width: 100%; aspect-ratio: 1/1; border-radius: 20px; overflow: hidden; border: 1px solid #eee; background: #fff; box-shadow: 0 10px 30px rgba(0,0,0,0.05);">
        <img id="current-main-img" src="{{ page.image }}" alt="{{ page.title }}" style="width: 100%; height: 100%; object-fit: contain;">
      </div>

      {% if page.images %}
      <div class="thumb-list" style="display: flex; gap: 10px; margin-top: 20px; overflow-x: auto; padding-bottom: 10px;">
        <div class="thumb active" onclick="updateMainImg('{{ page.image }}', this)" style="width: 70px; height: 70px; border-radius: 10px; border: 2px solid #ff4747; cursor: pointer; overflow: hidden; flex-shrink: 0;">
          <img src="{{ page.image }}" style="width:100%; height:100%; object-fit:cover;">
        </div>
        {% for img in page.images %}
        <div class="thumb" onclick="updateMainImg('{{ img.img }}', this)" style="width: 70px; height: 70px; border-radius: 10px; border: 2px solid #eee; cursor: pointer; overflow: hidden; flex-shrink: 0;">
          <img src="{{ img.img }}" style="width:100%; height:100%; object-fit:cover;">
        </div>
        {% endfor %}
      </div>
      {% endif %}
    </div>

    <!-- DROITE: INFO -->
    <div class="product-info" style="flex: 1.2; min-width: 320px;">
      <span style="background: #fff0f0; color: #ff4747; padding: 5px 12px; border-radius: 50px; font-size: 12px; font-weight: 700; text-transform: uppercase; letter-spacing: 1px;">{{ page.category }}</span>
      <h1 style="font-size: 2.5rem; margin: 15px 0; color: #222; font-weight: 900; line-height: 1.1;">{{ page.title }}</h1>

      <div class="price-box" style="margin: 25px 0; display: flex; align-items: center; gap: 20px;">
        <span style="font-size: 36px; font-weight: 900; color: #ff4747;">{{ page.price }} HTG</span>
        {% if page.old_price %}
        <span style="text-decoration: line-through; color: #bbb; font-size: 20px;">{{ page.old_price }} HTG</span>
        {% endif %}
      </div>

      <div style="padding: 20px; background: #fdfdfd; border: 1px solid #f0f0f0; border-radius: 15px; margin-bottom: 30px;">
        <div style="margin-bottom: 15px; font-weight: 600; color: #444;">Quantit√© :</div>
        <div class="qty-selector" style="display: inline-flex; border: 2px solid #eee; border-radius: 10px; overflow: hidden; background: #fff;">
          <button onclick="changeQty(-1)" style="width: 45px; height: 45px; border: none; background: none; font-size: 20px; cursor: pointer; transition: 0.2s;">-</button>
          <input type="number" id="prod-qty" value="1" min="1" style="width: 60px; text-align: center; border: none; font-weight: 800; font-size: 18px; outline: none;">
          <button onclick="changeQty(1)" style="width: 45px; height: 45px; border: none; background: none; font-size: 20px; cursor: pointer; transition: 0.2s;">+</button>
        </div>
      </div>

      <div class="actions" style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
        <button onclick="orderProduct('{{ page.title }}', '{{ page.price }}', '{{ page.id }}', '{{ page.image }}')" style="padding: 18px; background: #222; color: white; border: none; border-radius: 12px; font-weight: 800; font-size: 16px; cursor: pointer; transition: 0.3s; display: flex; align-items: center; justify-content: center; gap: 10px;">
          üõí Ajouter au panier
        </button>
        <button onclick="buyNow('{{ page.title }}', '{{ page.price }}', '{{ page.id }}', '{{ page.image }}')" style="padding: 18px; background: #ff4747; color: white; border: none; border-radius: 12px; font-weight: 800; font-size: 16px; cursor: pointer; transition: 0.3s; box-shadow: 0 10px 25px rgba(255, 71, 71, 0.3);">
          ‚ö° Acheter maintenant
        </button>
      </div>

      <div style="margin-top: 30px; border-top: 1px solid #eee; padding-top: 25px;">
        <div style="display: flex; gap: 20px; flex-wrap: wrap;">
          <div style="display: flex; align-items: center; gap: 8px; font-size: 13px; color: #666;">
            ‚úÖ Produit en stock
          </div>
          <div style="display: flex; align-items: center; gap: 8px; font-size: 13px; color: #666;">
            üõ°Ô∏è Paiement s√©curis√©
          </div>
          <div style="display: flex; align-items: center; gap: 8px; font-size: 13px; color: #666;">
            üöö Livraison 24-48h
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- DESCRIPTION -->
  <div class="product-description" style="margin-top: 60px; border-top: 1px solid #eee; padding-top: 40px;">
    <h2 style="font-size: 1.8rem; font-weight: 800; margin-bottom: 25px;">Description du produit</h2>
    <div class="content" style="line-height: 1.8; color: #555; font-size: 1.1rem;">
      {{ content }}
    </div>
  </div>
</div>

<style>
.qty-selector button:hover { background: #f9f9f9; color: #ff4747; }
.actions button:hover { transform: translateY(-3px); }
.thumb:hover { border-color: #ff4747; }
</style>

<script>
function updateMainImg(src, el) {
  document.getElementById('current-main-img').src = src;
  document.querySelectorAll('.thumb').forEach(t => {
    t.style.borderColor = '#eee';
    t.classList.remove('active');
  });
  el.style.borderColor = '#ff4747';
  el.classList.add('active');
}

function changeQty(val) {
  let input = document.getElementById('prod-qty');
  let current = parseInt(input.value);
  if (current + val >= 1) input.value = current + val;
}

function buyNow(title, price, id, image) {
  orderProduct(title, price, id, image);
  setTimeout(() => {
    window.location.href = '/checkout';
  }, 500);
}
</script>
