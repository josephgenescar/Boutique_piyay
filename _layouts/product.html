---
layout: default
---

<div class="product-page-container container">
  <!-- Fil d'Ariane -->
  <nav class="breadcrumb">
    <a href="/">Accueil</a> /
    <a href="/kategori/{{ page.category }}">{{ page.category }}</a> /
    <span>{{ page.title }}</span>
  </nav>

  <div class="product-main-flex">
    <!-- 1. GALERIE D'IMAGES -->
    <div class="product-gallery">
      <div class="main-img-box">
        <img id="current-main-img" src="{{ page.image }}" alt="{{ page.title }}">
      </div>

      {% if page.images %}
      <div class="thumb-list">
        <div class="thumb active" onclick="updateMainImg('{{ page.image }}', this)">
          <img src="{{ page.image }}" alt="">
        </div>
        {% for item in page.images %}
        <div class="thumb" onclick="updateMainImg('{{ item.img }}', this)">
          <img src="{{ item.img }}" alt="">
        </div>
        {% endfor %}
      </div>
      {% endif %}
    </div>

    <!-- 2. INFOS PRODUIT -->
    <div class="product-details">
      <h1 class="prod-title">{{ page.title }}</h1>

      <div class="prod-rating">
        <span class="stars">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</span>
        <span class="rev-count">(0 avis)</span>
      </div>

      <div class="prod-price-box">
        <span class="current-price">{{ page.price }} HTG</span>
        {% if page.old_price %}
          <span class="old-price">{{ page.old_price }} HTG</span>
        {% endif %}
      </div>

      <div class="prod-description">
        {{ content }}
      </div>

      <!-- Options (Admin Controlled) -->
      <div class="prod-options">
        {% if page.sizes %}
        <div class="opt-group">
          <label>Taille :</label>
          <select id="prod-size">
            {% for s in page.sizes %}
              <option value="{{ s.size }}">{{ s.size }}</option>
            {% endfor %}
          </select>
        </div>
        {% endif %}

        {% if page.variants %}
        <div class="opt-group">
          <label>Couleur / Mod√®le :</label>
          <div class="variant-chips">
            {% for v in page.variants %}
              <button class="chip" onclick="selectVariant(this)">{{ v.variant }}</button>
            {% endfor %}
          </div>
        </div>
        {% endif %}
      </div>

      <!-- Achat -->
      <div class="purchase-box">
        <div class="qty-selector">
          <button onclick="changeQty(-1)">-</button>
          <input type="number" id="prod-qty" value="1" min="1">
          <button onclick="changeQty(1)">+</button>
        </div>
        <button class="btn-add-main" onclick="orderProduct('{{ page.title }}', '{{ page.price }}', '{{ page.id }}')">
          üõí Ajouter au panier
        </button>
      </div>

      <div class="prod-meta">
        <p><strong>Disponibilit√© :</strong> En Stock ‚úÖ</p>
        <p><strong>Livraison :</strong> Rapide (24-48h)</p>
      </div>
    </div>
  </div>
</div>

<style>
.product-page-container { padding: 40px 20px; }
.breadcrumb { margin-bottom: 20px; color: #888; font-size: 14px; }
.breadcrumb a { color: #ff4747; text-decoration: none; }

.product-main-flex { display: flex; gap: 40px; flex-wrap: wrap; }
.product-gallery { flex: 1; min-width: 300px; }
.main-img-box { width: 100%; height: 450px; border-radius: 15px; overflow: hidden; border: 1px solid #eee; margin-bottom: 15px; background: #fff; }
.main-img-box img { width: 100%; height: 100%; object-fit: contain; }

.thumb-list { display: flex; gap: 10px; overflow-x: auto; padding-bottom: 5px; }
.thumb { width: 70px; height: 70px; border-radius: 8px; border: 2px solid #eee; cursor: pointer; overflow: hidden; flex-shrink: 0; }
.thumb img { width: 100%; height: 100%; object-fit: cover; }
.thumb.active { border-color: #ff4747; }

.product-details { flex: 1; min-width: 300px; }
.prod-title { font-size: 28px; margin-bottom: 10px; color: #222; }
.prod-price-box { margin: 20px 0; }
.current-price { font-size: 32px; font-weight: 800; color: #ff4747; }
.old-price { text-decoration: line-through; color: #999; margin-left: 15px; font-size: 18px; }

.prod-options { margin: 25px 0; border-top: 1px solid #eee; padding-top: 20px; }
.opt-group { margin-bottom: 15px; }
.opt-group label { display: block; margin-bottom: 8px; font-weight: 600; }
.variant-chips { display: flex; gap: 10px; flex-wrap: wrap; }
.chip { padding: 8px 15px; border: 1px solid #ddd; border-radius: 20px; background: #fff; cursor: pointer; transition: 0.3s; }
.chip.active { background: #ff4747; color: #fff; border-color: #ff4747; }

.purchase-box { display: flex; gap: 15px; align-items: center; margin-top: 30px; }
.qty-selector { display: flex; border: 1px solid #ddd; border-radius: 8px; overflow: hidden; }
.qty-selector button { width: 40px; height: 40px; border: none; background: #f5f5f5; cursor: pointer; font-size: 18px; }
.qty-selector input { width: 50px; text-align: center; border: none; font-weight: bold; }
.btn-add-main { flex: 1; padding: 15px; background: #ff4747; color: #fff; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; font-size: 16px; }

@media (max-width: 768px) {
  .product-main-flex { flex-direction: column; }
  .main-img-box { height: 350px; }
}
</style>

<script>
function updateMainImg(src, el) {
  document.getElementById('current-main-img').src = src;
  document.querySelectorAll('.thumb').forEach(t => t.classList.remove('active'));
  el.classList.add('active');
}

function changeQty(val) {
  let input = document.getElementById('prod-qty');
  let current = parseInt(input.value);
  if (current + val >= 1) input.value = current + val;
}

function selectVariant(el) {
  document.querySelectorAll('.chip').forEach(c => c.classList.remove('active'));
  el.classList.add('active');
}
</script>
