---
layout: default
---

<link rel="stylesheet" href="{{ '/assets/css/aliexpress-product-detail.css' | relative_url }}">

<!-- BREADCRUMB -->
<div class="breadcrumb-product">
  <a href="/">üè† Accueil</a>
  <span>/</span>
  <a href="/shop.html">üõçÔ∏è Tous les produits</a>
  <span>/</span>
  <a href="#">{{ page.category | capitalize }}</a>
  <span>/</span>
  <span>{{ page.title }}</span>
</div>

<!-- MAIN PRODUCT CONTAINER -->
<div class="product-page-container">

  <!-- PRODUCT MAIN LAYOUT -->
  <div class="product-main-container">

    <!-- LEFT: GALLERY -->
    <div class="product-gallery-section">
      <div class="gallery-main-wrapper">
        <img
          id="main-product-image"
          src="{{ page.featured_image | default: page.image }}"
          alt="{{ page.title }}"
          class="gallery-main-image">
        <div class="gallery-image-count">
          <span id="image-count">1</span>/
          <span id="total-images">
            {% if page.images %}{{ page.images | size | plus: 1 }}{% else %}1{% endif %}
          </span>
        </div>
      </div>

      <!-- THUMBNAIL GALLERY -->
      <div class="gallery-thumbnails" id="thumbnail-gallery">
        <div class="gallery-thumbnail active" onclick="switchImage('{{ page.featured_image | default: page.image }}', 0)">
          <img src="{{ page.featured_image | default: page.image }}" alt="">
        </div>
        {% if page.images %}
          {% for img in page.images %}
          <div class="gallery-thumbnail" onclick="switchImage('{{ img.image | default: img }}', {{ forloop.index }})">
            <img src="{{ img.image | default: img }}" alt="">
          </div>
          {% endfor %}
        {% endif %}
      </div>
    </div>

    <!-- RIGHT: PRODUCT DETAILS -->
    <div class="product-details-section">

      <!-- HEADER INFO -->
      <div class="product-header-info">
        <h1 class="product-title-detail">{{ page.title }}</h1>

        <div class="product-rating-detail">
          <div class="rating-stars">
            <span class="stars">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</span>
            <span class="rating-count">(0 avis)</span>
          </div>
          <a href="#reviews" class="rating-link">Voir les avis ‚Üí</a>
        </div>
      </div>

      <!-- SELLER INFO -->
      <div class="seller-info-box">
        <div class="seller-details">
          <div class="seller-badge">üè™</div>
          <div class="seller-info">
            <div class="seller-name">Boutique Piyay</div>
            <div class="seller-ratings">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê 98% positifs</div>
          </div>
        </div>
        <button class="seller-action" onclick="contactSeller()">Contacter</button>
      </div>

      <!-- PRICE SECTION -->
      <div class="price-section">
        <div class="price-display">
          <span class="price-currency">HTG</span>
          <span class="price-main">{{ page.price }}</span>
          {% if page.original_price %}
            <span class="price-original">{{ page.original_price }}</span>
            <span class="price-discount">-{{ page.discount_percent | default: 20 }}%</span>
          {% endif %}
        </div>
        <div class="shipping-info">
          ‚úàÔ∏è <span class="accent">Livraison gratuite</span> d√®s 1000 HTG
        </div>
      </div>

      <!-- STOCK STATUS -->
      {% if page.in_stock != false %}
      <div class="stock-status">
        <div class="stock-indicator">
          <span>‚úÖ En stock</span>
          <span style="font-size: 12px; color: #666;">(85% vendu) </span>
        </div>
        <div class="stock-bar">
          <div class="stock-bar-fill"></div>
        </div>
      </div>
      {% endif %}

      <!-- VARIANTS -->
      <div class="variants-section">

        <!-- COLORS/SIZE -->
        {% if page.variants %}
        <div class="variant-group">
          <div class="variant-label">
            Couleur / Mod√®le
            <span class="variant-required">*</span>
          </div>
          <div class="variant-options" id="variants-container">
            {% for variant in page.variants %}
              <button
                class="variant-option"
                onclick="selectVariant(this, '{{ variant.name | default: variant }}')">
                {{ variant.name | default: variant }}
              </button>
            {% endfor %}
          </div>
        </div>
        {% endif %}

        <!-- SIZE -->
        {% if page.sizes %}
        <div class="variant-group">
          <div class="variant-label">
            Taille
            <span class="variant-required">*</span>
          </div>
          <div class="variant-options" id="sizes-container">
            {% for size in page.sizes %}
              <button
                class="variant-option"
                onclick="selectSize(this, '{{ size.size | default: size }}')">
                {{ size.size | default: size }}
              </button>
            {% endfor %}
          </div>
        </div>
        {% endif %}

        <!-- QUANTITY -->
        <div class="variant-group">
          <div class="variant-label">Quantit√©</div>
          <div style="display: flex; align-items: center; gap: 15px;">
            <div class="quantity-selector">
              <button class="qty-btn" onclick="decreaseQty()">‚àí</button>
              <input type="number" id="product-quantity" class="qty-input" value="1" min="1" max="9999">
              <button class="qty-btn" onclick="increaseQty()">+</button>
            </div>
            <span id="available-qty" style="font-size: 13px; color: #666;">En stock: 85</span>
          </div>
        </div>
      </div>

      <!-- ACTION BUTTONS -->
      <div class="purchase-section">
        <button class="btn-add-cart" onclick="addProductToCart('{{ page.title }}', {{ page.price }}, '{{ page.featured_image | default: page.image }}')">
          üõí Ajouter au panier
        </button>
        <button class="btn-buy-now" onclick="buyNow('{{ page.title }}', {{ page.price }})">
          ‚ö° Acheter maintenant
        </button>
        <button class="btn-wishlist" id="wishlist-btn" onclick="toggleWishlistProduct('{{ page.title }}')">
          ü§ç
        </button>
      </div>

    </div>

  </div>

  <!-- PRODUCT TABS -->
  <div class="product-tabs">
    <div class="tabs-header">
      <button class="tab-button active" onclick="switchTab(this, 'description')">üìù Description</button>
      <button class="tab-button" onclick="switchTab(this, 'specifications')">üìã Sp√©cifications</button>
      <button class="tab-button" onclick="switchTab(this, 'shipping')">üöö Exp√©dition & Livraison</button>
      <button class="tab-button" onclick="switchTab(this, 'reviews')">‚≠ê Avis</button>
    </div>

    <div class="tabs-content">
      <!-- DESCRIPTION TAB -->
      <div class="tab-pane active" id="description">
        <h3>Description du produit</h3>
        <div style="line-height: 1.8; color: #666;">
          {{ content }}
        </div>
      </div>

      <!-- SPECIFICATIONS TAB -->
      <div class="tab-pane" id="specifications">
        <h3>Sp√©cifications</h3>
        <div class="specifications-list">
          <div class="spec-item">
            <span class="spec-label">Cat√©gorie</span>
            <span class="spec-value">{{ page.category | capitalize }}</span>
          </div>
          {% if page.material %}
          <div class="spec-item">
            <span class="spec-label">Mat√©riau</span>
            <span class="spec-value">{{ page.material }}</span>
          </div>
          {% endif %}
          {% if page.color %}
          <div class="spec-item">
            <span class="spec-label">Couleur</span>
            <span class="spec-value">{{ page.color }}</span>
          </div>
          {% endif %}
          {% if page.weight %}
          <div class="spec-item">
            <span class="spec-label">Poids</span>
            <span class="spec-value">{{ page.weight }}</span>
          </div>
          {% endif %}
          {% if page.dimensions %}
          <div class="spec-item">
            <span class="spec-label">Dimensions</span>
            <span class="spec-value">{{ page.dimensions }}</span>
          </div>
          {% endif %}
          <div class="spec-item">
            <span class="spec-label">Disponibilit√©</span>
            <span class="spec-value">{% if page.in_stock != false %}En stock{% else %}Indisponible{% endif %}</span>
          </div>
        </div>
      </div>

      <!-- SHIPPING TAB -->
      <div class="tab-pane" id="shipping">
        <h3>Exp√©dition & Livraison</h3>
        <p>üì¶ <strong>Livraison gratuite</strong> pour les commandes de 1000 HTG ou plus</p>
        <p>‚è±Ô∏è <strong>D√©lai de livraison:</strong> 24-48 heures en Ha√Øti</p>
        <p>üöö <strong>Options de paiement:</strong> Moncash, Natcash, Esp√®ces √† la livraison</p>
        <p>üîÑ <strong>Politique de retour:</strong> 14 jours pour retour gratuit</p>
      </div>

      <!-- REVIEWS TAB -->
      <div class="tab-pane" id="reviews">
        <h3>Avis clients</h3>
        <p style="color: #999; font-style: italic;">Aucun avis pour le moment. Soyez le premier √† laisser un avis!</p>
      </div>
    </div>
  </div>

  <!-- SIMILAR PRODUCTS -->
  <div class="similar-products-section">
    <h2>üîç Produits similaires</h2>
    <div class="similar-products-grid">
      {% for product in site.products limit:4 %}
        {% unless product.title == page.title %}
        <div class="similar-product-card" onclick="window.location.href='{{ product.url }}'">
          <div style="aspect-ratio: 1; overflow: hidden; background: #f9f9f9;">
            <img src="{{ product.featured_image | default: product.image }}" alt="{{ product.title }}" style="width:100%; height:100%; object-fit:cover;">
          </div>
          <div style="padding: 12px;">
            <h4 style="margin: 0 0 8px 0; font-size: 14px;">{{ product.title }}</h4>
            <div style="color: #FF5722; font-weight: 700; font-size: 16px;">{{ product.price }} HTG</div>
          </div>
        </div>
        {% endunless %}
      {% endfor %}
    </div>
  </div>

</div>

<script>
// Image Gallery
function switchImage(imageSrc, index) {
  document.getElementById('main-product-image').src = imageSrc;
  document.getElementById('image-count').textContent = index + 1;

  document.querySelectorAll('.gallery-thumbnail').forEach((thumb, i) => {
    thumb.classList.toggle('active', i === index);
  });
}

// Variants
function selectVariant(element, variantName) {
  document.querySelectorAll('#variants-container .variant-option').forEach(el => {
    el.classList.remove('selected');
  });
  element.classList.add('selected');
}

// Size
function selectSize(element, sizeName) {
  document.querySelectorAll('#sizes-container .variant-option').forEach(el => {
    el.classList.remove('selected');
  });
  element.classList.add('selected');
}

// Quantity
function increaseQty() {
  const input = document.getElementById('product-quantity');
  input.value = parseInt(input.value) + 1;
}

function decreaseQty() {
  const input = document.getElementById('product-quantity');
  if (parseInt(input.value) > 1) {
    input.value = parseInt(input.value) - 1;
  }
}

// Add to Cart
function addProductToCart(title, price, image) {
  const qty = parseInt(document.getElementById('product-quantity').value) || 1;

  let cart = JSON.parse(localStorage.getItem('cart') || '[]');
  const existingItem = cart.find(item => item.title === title);

  if (existingItem) {
    existingItem.quantity += qty;
  } else {
    cart.push({ title, price, image, quantity: qty });
  }

  localStorage.setItem('cart', JSON.stringify(cart));
  showNotificationProduct(`‚úÖ ${qty}x "${title}" ajout√© au panier!`);
  updateCartBadge();
}

// Wishlist
function toggleWishlistProduct(title) {
  const btn = document.getElementById('wishlist-btn');
  let wishlist = JSON.parse(localStorage.getItem('wishlist') || '[]');

  if (wishlist.includes(title)) {
    wishlist = wishlist.filter(item => item !== title);
    btn.classList.remove('active');
    showNotificationProduct('üíî Retir√© des favoris');
  } else {
    wishlist.push(title);
    btn.classList.add('active');
    showNotificationProduct('‚ù§Ô∏è Ajout√© aux favoris!');
  }

  localStorage.setItem('wishlist', JSON.stringify(wishlist));
}

// Tabs
function switchTab(button, tabId) {
  document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
  document.querySelectorAll('.tab-pane').forEach(pane => pane.classList.remove('active'));

  button.classList.add('active');
  document.getElementById(tabId).classList.add('active');
}

// Notification
function showNotificationProduct(message) {
  const notification = document.createElement('div');
  notification.textContent = message;
  notification.style.cssText = `
    position: fixed;
    top: 20px;
    right: 20px;
    background: #4CAF50;
    color: white;
    padding: 16px 24px;
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    z-index: 10000;
    animation: slideInRight 0.3s ease-out;
  `;

  document.body.appendChild(notification);

  setTimeout(() => {
    notification.style.animation = 'slideOutRight 0.3s ease-out';
    setTimeout(() => notification.remove(), 300);
  }, 2500);
}

function buyNow(title, price) {
  addProductToCart(title, price, '');
  window.location.href = '/checkout.html';
}

function contactSeller() {
  window.open('https://wa.me/50948868964?text=Bonjour, je suis int√©ress√© par un produit', '_blank');
}

// Load wishlist state
document.addEventListener('DOMContentLoaded', () => {
  const title = document.querySelector('.product-title-detail').textContent;
  const wishlist = JSON.parse(localStorage.getItem('wishlist') || '[]');
  if (wishlist.includes(title)) {
    document.getElementById('wishlist-btn').classList.add('active');
  }

  // Add animation styles
  const style = document.createElement('style');
  style.textContent = `
    @keyframes slideInRight {
      from { transform: translateX(400px); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }
    @keyframes slideOutRight {
      from { transform: translateX(0); opacity: 1; }
      to { transform: translateX(400px); opacity: 0; }
    }
  `;
  document.head.appendChild(style);
});
</script>
.breadcrumb { margin-bottom: 20px; color: #888; font-size: 14px; }
.breadcrumb a { color: #ff4747; text-decoration: none; }

.product-main-flex { display: flex; gap: 40px; flex-wrap: wrap; }
.product-gallery { flex: 1; min-width: 300px; }
.main-img-box { width: 100%; height: 450px; border-radius: 15px; overflow: hidden; border: 1px solid #eee; margin-bottom: 15px; background: #fff; }
.main-img-box img { width: 100%; height: 100%; object-fit: contain; }

.thumb-list { display: flex; gap: 10px; overflow-x: auto; padding-bottom: 5px; }
.thumb { width: 70px; height: 70px; border-radius: 8px; border: 2px solid #eee; cursor: pointer; overflow: hidden; flex-shrink: 0; }
.thumb img { width: 100%; height: 100%; object-fit: cover; }
.thumb.active { border-color: #ff4747; }

.product-details { flex: 1; min-width: 300px; }
.prod-title { font-size: 28px; margin-bottom: 10px; color: #222; }
.prod-price-box { margin: 20px 0; }
.current-price { font-size: 32px; font-weight: 800; color: #ff4747; }
.old-price { text-decoration: line-through; color: #999; margin-left: 15px; font-size: 18px; }

.prod-options { margin: 25px 0; border-top: 1px solid #eee; padding-top: 20px; }
.opt-group { margin-bottom: 15px; }
.opt-group label { display: block; margin-bottom: 8px; font-weight: 600; }
.variant-chips { display: flex; gap: 10px; flex-wrap: wrap; }
.chip { padding: 8px 15px; border: 1px solid #ddd; border-radius: 20px; background: #fff; cursor: pointer; transition: 0.3s; }
.chip.active { background: #ff4747; color: #fff; border-color: #ff4747; }

.purchase-box { display: flex; gap: 15px; align-items: center; margin-top: 30px; }
.qty-selector { display: flex; border: 1px solid #ddd; border-radius: 8px; overflow: hidden; }
.qty-selector button { width: 40px; height: 40px; border: none; background: #f5f5f5; cursor: pointer; font-size: 18px; }
.qty-selector input { width: 50px; text-align: center; border: none; font-weight: bold; }
.btn-add-main { flex: 1; padding: 15px; background: #ff4747; color: #fff; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; font-size: 16px; }

@media (max-width: 768px) {
  .product-main-flex { flex-direction: column; }
  .main-img-box { height: 350px; }
}
</style>

<script>
function updateMainImg(src, el) {
  document.getElementById('current-main-img').src = src;
  document.querySelectorAll('.thumb').forEach(t => t.classList.remove('active'));
  el.classList.add('active');
}

function changeQty(val) {
  let input = document.getElementById('prod-qty');
  let current = parseInt(input.value);
  if (current + val >= 1) input.value = current + val;
}

function selectVariant(el) {
  document.querySelectorAll('.chip').forEach(c => c.classList.remove('active'));
  el.classList.add('active');
}
</script>
