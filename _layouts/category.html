---
layout: default
---

{% assign category_id = page.title %}
{% assign category_products = site.products | where: "category", category_id %}
{% assign count = category_products | size %}

<div class="category-header" style="background: linear-gradient(135deg, #ff4747, #ff8c42); padding: 60px 20px; text-align: center; color: white; border-radius: 0 0 30px 30px; margin-bottom: 40px;">
    <div class="container">
        <h1 style="font-size: 2.5rem; margin-bottom: 10px; font-weight: 900;">{{ page.display_name | default: page.title }}</h1>
        <p style="opacity: 0.9; font-size: 1.1rem; max-width: 600px; margin: 0 auto;">{{ page.description }}</p>

        <div style="margin-top: 20px; background: rgba(255,255,255,0.2); display: inline-block; padding: 8px 20px; border-radius: 50px; font-size: 0.9rem; font-weight: bold;">
            {{ count }} pwodwi disponib
        </div>
    </div>
</div>

<div class="container">
    {% if count > 0 %}
    <!-- FILTRES -->
    <div class="filter-bar" style="display: flex; gap: 10px; margin-bottom: 30px; overflow-x: auto; padding-bottom: 10px; scrollbar-width: none; justify-content: center;">
        <button class="filter-btn active" onclick="filterCategory('tout')">Tout Pwodwi</button>
        <button class="filter-btn" onclick="filterCategory('prix-bas')">Pri Ba â†’ Wo</button>
        <button class="filter-btn" onclick="filterCategory('prix-haut')">Pri Wo â†’ Ba</button>
    </div>

    <div id="category-grid" class="product-grid">
        {% for product in category_products %}
            <div class="product-card" data-price="{{ product.price }}">
                <div class="card-img">
                    <a href="{{ product.url }}"><img src="{{ product.image }}" alt="{{ product.title }}"></a>
                </div>
                <div class="card-info">
                    <h3>{{ product.title }}</h3>
                    <div class="price">{{ product.price }} HTG</div>
                    <button class="add-to-cart" onclick="orderProduct('{{ product.title }}', '{{ product.price }}', '{{ product.id }}')">ðŸ›’ Ajouter au panier</button>
                </div>
            </div>
        {% endfor %}
    </div>
    {% else %}
    <div style="text-align: center; padding: 60px 20px; color: #888;">
        <span style="font-size: 4rem; display: block; margin-bottom: 20px;">ðŸ˜”</span>
        <h3 style="font-weight: 800;">Poko gen pwodwi nan kategori sa a</h3>
        <p>Ajoute pwodwi nan kategori <strong>{{ category_id }}</strong> nan Admin CMS la pou yo parÃ¨t isit la.</p>
        <a href="/" class="btn-primary" style="display: inline-block; margin-top: 25px; background: #ff4747; color: white; padding: 12px 30px; border-radius: 10px; text-decoration: none; font-weight: bold;">Retounen nan AkÃ¨y</a>
    </div>
    {% endif %}
</div>

<style>
.filter-btn {
    background: white; border: 1px solid #eee; padding: 10px 20px; border-radius: 10px; cursor: pointer; white-space: nowrap; font-weight: 700; font-size: 14px; transition: 0.3s;
}
.filter-btn.active, .filter-btn:hover { background: #ff4747; color: white; border-color: #ff4747; box-shadow: 0 4px 12px rgba(255, 71, 71, 0.2); }
</style>

<script>
function filterCategory(type) {
    const grid = document.getElementById('category-grid');
    if (!grid) return;
    const cards = Array.from(grid.getElementsByClassName('product-card'));
    const btns = document.querySelectorAll('.filter-btn');

    btns.forEach(b => b.classList.remove('active'));
    event.target.classList.add('active');

    if (type === 'prix-bas') {
        cards.sort((a, b) => parseFloat(a.dataset.price) - parseFloat(b.dataset.price));
    } else if (type === 'prix-haut') {
        cards.sort((a, b) => parseFloat(b.dataset.price) - parseFloat(a.dataset.price));
    }

    grid.innerHTML = '';
    cards.forEach(c => grid.appendChild(c));
}
</script>
